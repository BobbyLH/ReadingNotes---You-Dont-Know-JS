# è¿›å…¥JavaScript(Into JavaScript)
è¿™ä¸€ç« èŠ‚çš„å†…å®¹ä¼šå¯¹èšç„¦åœ¨JavaScriptè¿™é—¨è¯­è¨€ä¸­ä¸€äº›ç‰¹åˆ«ä¸œè¥¿ï¼Œå¹¶ä¸”å¯¹æ­¤åšä¸€ä¸ªå¤§è‡´çš„æ¢³ç†è¿‡ç¨‹ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ·±å…¥å…¶ä¸­ã€‚

æ·±åº¦æ¢ç©¶JavaScriptçš„èµ·ç‚¹ï¼Œæ˜¯ä»è¿™é‡Œå¼€å§‹

## å€¼å’Œç±»å‹(Values & Types)
JavaScript(åç®€ç§°JS)ï¼Œå˜é‡æ²¡æœ‰ç±»å‹ï¼Œåªæœ‰å€¼æ‰æœ‰ç±»å‹ï¼Œä¸‹é¢æ˜¯ä¸€äº›å†…ç½®çš„ç±»å‹ï¼š
- `string` - å­—ç¬¦ä¸²

- `number` - æ•°å­—

- `boolean` - å¸ƒå°”å€¼

- `null` å’Œ `undefined`

- `object` å¯¹è±¡ç±»å‹

- `symbol`

JS ä¹Ÿå†…ç½®äº† `typeof` è¿ç®—ç¬¦ï¼Œèƒ½å¤Ÿä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›æŸä¸ªå€¼çš„ç±»å‹ï¼š
```javascript
var a;
typeof a; // "undefined"

a = 'test';
typeof a; // "string"

a = 2;
typeof a; // "number"

a = true;
typeof a; // "boolean"

a = null;
typeof a; // "object"

a = undefined;
typeof a; // "undefined"

a = {};
typeof a; // "object"

a = Symbol(1);
typeof a; // "symbol"
```

__Tips__: ğŸ‘†æ³¨æ„ä¸Šé¢çš„ `typeof a` å¹¶ä¸æ˜¯è¯¢é—®å˜é‡ `a` çš„ç±»å‹ï¼Œè€Œæ˜¯è¯¢é—®å½“å‰åœ¨å˜é‡ `a` ä¸­çš„å€¼æ˜¯ä»€ä¹ˆç±»å‹ã€‚

__Warning__ï¼š`typeof null` è¿”å›çš„æ˜¯ä¸€ä¸ª `"object"`ï¼Œè™½ç„¶è¿™æ˜¯ä¸€ä¸ª _bug_ï¼Œä½†å®ƒç»å†äº†å¾ˆé•¿å†å²åŒ…è¢±ï¼Œå› æ­¤è‹¥æ˜¯å°†å…¶ä¿®å¤ï¼Œç”šè‡³ä¼šå¯¼è‡´æ›´å¤šæ›´ä¸¥é‡çš„é—®é¢˜ã€‚

`a = undefined` æ˜¯æˆ‘ä»¬æ˜¾ç¤ºçš„ç»™å˜é‡ `a` èµ‹å€¼ `undefined`ï¼›åœ¨JSä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§èƒ½è®¾ç½®å˜é‡ä¸º `undefined` çš„æ–¹å¼ï¼š
- `var a;` â€”â€” ä¸è®¾ç½®ä»»ä½•å€¼

- `a = undefined;` â€”â€” æ˜¾ç¤ºçš„èµ‹äºˆ`undefined`

- `var a = (function () {})()` â€”â€” å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼

- `void(undefined)` â€”â€” ä½¿ç”¨ `void` è¿ç®—ç¬¦

### å¯¹è±¡(Object)
å¯¹è±¡æ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„å½¢å¼çš„é›†åˆï¼Œå³ç”±å­—ç¬¦ä¸²ç±»å‹çš„ *å±æ€§å*(properties)åŒ…å« *ä»»æ„* çš„å¤åˆå€¼çš„é›†åˆï¼š
```javascript
var obj = {
  a: "text",
  b: 22,
  c: false
};

obj.a; // "text"
obj.b; // 22
obj.c; // false

obj[a]; // "text"
obj[b]; // 22
obj[c]; // false
```

ä»å¯¹è±¡ä¸­è·å–å±æ€§å¯ä»¥ç”¨ `.` ç‚¹è¿ç®—ç¬¦(dot notation) æˆ–è€… `[]` æ‹¬å·è¿ç®—ç¬¦(bracket notation) â€”â€” å‰è€…æ›´å¸¸ç”¨ä¹Ÿæ›´æ–¹ä¾¿é˜…è¯»ï¼Œåè€…åœ¨å±æ€§åå«æœ‰ *ç‰¹æ®Šå­—ç¬¦* æˆ–è€…ç”¨ *å˜é‡* æ—¶ä½¿ç”¨ï¼š
```javascript
var obj = {
  a: "text",
  b: 22,
  'test string': false
};
var b = 'a';

obj['test string']; // fasle
obj[b]; // "text"
obj['b']; // 22
```

#### æ•°ç»„(Arrays)
æ•°ç»„æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹ï¼Œä½†å®ƒçš„é”®æ˜¯ç”±æ•°å­—ç±»å‹çš„ *ç´¢å¼•*(indexed) ç»„æˆçš„ï¼Œå¹¶ä¸”å†…ç½®äº†ä¸€ä¸ª `length` çš„å±æ€§è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ï¼š
```javascript
var arr = ["text", 22, false];

arr[0]; // "text"
arr[1]; // 22
arr[2]; // false
arr.length; // 3

typeof arr; // "object"
```

`length` å±æ€§ä¼šè‡ªåŠ¨æ ¹æ®æ•°ç»„çš„é•¿åº¦è¿›è¡Œæ›´æ–°ï¼Œä½†å¦‚æœä½ è‡ªå®šä¹‰äº†éæ•°å­—ç±»å‹çš„å±æ€§åï¼Œé‚£ä¹ˆæ–°å¢çš„ä¸ä¼šè®¡å…¥åˆ° `length` ä¸­ï¼›å› æ­¤æ­£å¸¸çš„ä½¿ç”¨æ•°ç»„çš„æ–¹å¼è¿˜æ˜¯ç”¨æ•°å­—ç±»å‹çš„ç´¢å¼•

#### å‡½æ•°(Functions)
å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹ï¼š
```javascript
function foo () {
  return 22;
}

foo.bar = 'text';

typeof foo; // "function"
typeof foo(); // "number"
typeof foo.bar; // "string"
```

è™½ç„¶ `typeof foo;` ç”Ÿæˆçš„ç»“æœæ˜¯ `"function"`ï¼Œç„¶è€Œå‡½æ•°ä¾ç„¶å¯ä»¥åƒå¯¹è±¡ä¸€æ ·æ‹¥æœ‰å±æ€§ï¼Œè¿™ä¹Ÿæ„å‘³ç€å‡½æ•°æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹(subtype)

### å†…ç½®ç±»å‹çš„æ–¹æ³•(Built-In Type Methods)
å†…ç½®(built-in)ç±»å‹ä»¥åŠå­(subtype)ç±»å‹æš´éœ²å‡ºæ¥çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ååˆ†æœ‰ç”¨ï¼š
```javascript
var a = 'text';
var b = 3.14159;

a.length; // 4
a.toUpperCase(); // "TEXT"
b.toFixed(4); // "3.1416"
```

ğŸ‘†`a.toUppercase()` ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿™æ ·è¢«è°ƒç”¨ï¼Œåœ¨å…¶åº•å±‚æœ‰è¾ƒä¸ºå¤æ‚çš„é€»è¾‘ï¼›ç®€å•è®²ï¼Œæœ‰ä¸€ä¸ª `String` åŒ…è£…å¯¹è±¡ï¼Œé€šå¸¸ç§°ä¸ºå†…ç½®å¯¹è±¡(native)ï¼Œä¸åŸå§‹ç±»å‹çš„ `string` é…å¯¹ï¼Œåœ¨å…¶åŸå‹å¯¹è±¡`prototype`ä¸Šï¼Œå®šä¹‰äº†è¿™ä¸ªå«åš`toUpperCase` çš„æ–¹æ³•ã€‚å½“ä½ åƒå¯¹è±¡ä¸€æ ·æŸ¥è¯¢ `"text"` çš„å±æ€§æˆ–è€…æ–¹æ³•æ—¶ï¼ŒJSä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ *åŒ…è£…(boxes)* ä¸€å±‚ä¸ä¹‹é…å¯¹çš„å¯¹è±¡(è¯¥ä¾‹ä¸­å°±æ˜¯ `String` å¯¹è±¡) â€”â€” å¯¹äº `number` ç±»å‹çš„å°±æ˜¯ `Number` å¯¹è±¡ï¼Œ`boolean` ç±»å‹çš„å°±æ˜¯ `Boolean` å¯¹è±¡ã€‚

### æ¯”è¾ƒå€¼(Comparing Values)
åœ¨JSä¸­ï¼Œæœ‰ä¸¤ç§æ¯”è¾ƒçš„ç±»å‹ï¼š*ç›¸ç­‰(equality)* å’Œ *ä¸ç›¸ç­‰(inequality)* æ¯”è¾ƒã€‚æ— è®ºæ¯”è¾ƒçš„å€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ¯”è¾ƒçš„æœ€ç»ˆç»“æœéƒ½æ˜¯å¸ƒå°”å€¼ã€‚

#### ç±»å‹è½¬æ¢(Coercion)
JSä¸­æœ‰ä¸¤ç§å½¢å¼çš„ç±»å‹è½¬åŒ–ï¼š*æ˜¾ç¤ºçš„(explicit)* å’Œ *éšå¼çš„(implicit)* â€”â€” å‰è€…æ˜¯ä½ èƒ½å¤Ÿæ˜æ˜¾åœ¨ä»£ç ä¸­çœ‹åˆ°çš„ï¼Œåè€…æ˜¯æŒ‡åœ¨æŸäº›ä¸æ³¨æ„çš„åœ°æ–¹å‘ç”Ÿçš„å‰¯ä½œç”¨çš„æ“ä½œäº§ç”Ÿçš„è½¬æ¢ã€‚

ç±»å‹è½¬æ¢ä¸æ˜¯é­”é¬¼ï¼Œç›¸ååœ¨å¾ˆå¤šåœ°æ–¹å®ƒéƒ½å¾ˆæœ‰ç”¨ â€”â€” å¯¹äºå†™å‡ºå¯è¯»çš„ã€åˆç†çš„ã€æ˜“äºç†è§£çš„ä»£ç æœ‰å¾ˆå¤§å¸®åŠ©ï¼š
```javascript
var a = "22";
// æ˜¾ç¤ºè½¬æ¢ explicit
var b = Number(a);

a; // "22"
b; // 22
```

```javascript
var a = "22";
// éšå¼è½¬æ¢ implicit
var b = a * 1;

a; // "22"
b; // 22
```

#### Turthy å’Œ Falsy
JSä¸­çš„ `falsy` çš„å€¼ï¼š
- `""`

- `0`, `-0`, `NaN`

- `null`, `undefined`

- `false`

æ‰€æœ‰ä¸åœ¨ `falsy` åˆ—è¡¨ä¸­çš„å€¼å°±æ˜¯ `truthy`ï¼Œæ¯”å¦‚ï¼š
- `"text"`

- `22`

- `true`

- `[ ]`ã€`[1, "2", 3]`

- `{ }`ã€`{ a: 22 }`

- `function foo () {}`

#### ç›¸ç­‰(Equality)
è®°ä½å››ä¸ªç›¸ç­‰è¿ç®—æ“ä½œç¬¦ `==`ã€`===`ã€`!=`ã€`!==`

`!` éæ“ä½œç¬¦æ„å‘³ç€ *å–åå€¼(not equal)*

**Tips**ï¼šåŒºåˆ« `!= !==`(*non-equality*) å’Œ `>ã€>=ã€<ã€<=`(*inequality*)

`==` å’Œ `===` çš„åŒºåˆ« *ä¸æ˜¯* è¯´å‰è€…åªæ£€æµ‹å€¼æ˜¯å¦ç›¸ç­‰ï¼Œåè€…é™¤äº†å€¼ä¹‹å¤–è¿˜è¦æ£€æµ‹ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œè€Œæ˜¯å‰è€…åœ¨æ¯”è¾ƒçš„æ—¶å€™å…è®¸ç±»å‹è½¬æ¢ï¼Œåè€…ä¸å…è®¸ï¼š
```javascript
var a = '22';
var b = 22;

a === b; //false
a == b; // true
```

å¯¹äºğŸ‘†çš„ `a == b`ï¼Œåˆ°åº•æ˜¯è½¬æ¢æˆäº†`"22" == "22"` è¿˜æ˜¯ `22 == 22` å‘¢ï¼Ÿç­”æ¡ˆæ˜¯åè€…ã€‚å…¶è½¬æ¢è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œè¯¦è§[ç±»å‹è½¬æ¢](../types%20%26%20grammar/coercion.md)ä¸€ç« 

å¯¹äºåº”è¯¥ä½¿ç”¨ `===` ä»è€Œé¿å… `==` å¸¦æ¥çš„å›°æƒ‘ï¼Œä¸€ç›´ä»¥æ¥éƒ½æœ‰å¾ˆå¤šäº‰è®ºï¼Œä½†æ˜¯ `==` ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ï¼Œä½ åº”è¯¥å­¦ä¹ äº†è§£å®ƒçš„è§„åˆ™ç„¶åä½¿ç”¨å®ƒï¼Œè€Œä¸æ˜¯å…¨ç„¶å¦å®šæ‰å®ƒã€‚è¿™é‡Œæœ‰å‡ ä¸ªç®€å•çš„è§„åˆ™ï¼š
- å¦‚æœå€¼æ˜¯`true` æˆ–è€… `false`ï¼Œé‚£ä¹ˆåˆ«ä½¿ç”¨`==`ï¼Œç”¨ `===` ä»£æ›¿

- å¦‚æœæ¯”è¾ƒå€¼æ˜¯ä¸‹é¢å…¶ä¸­ä¹‹ä¸€ï¼Œåˆ«ä½¿ç”¨`==`ï¼Œç”¨ `===` ä»£æ›¿ï¼š
  - `0`

  - `""`

  - `[]`

- å…¶ä»–æƒ…å†µä¸‹ï¼Œä½¿ç”¨ `==` æ˜¯å®‰å…¨å¯é çš„ï¼Œå¹¶ä¸”è®©ä½ çš„ä»£ç æ›´å…·æœ‰å¯è¯»æ€§

å¯¹äº `!=` å’Œ `!==` çš„ä½¿ç”¨è§„åˆ™å’Œç›¸ç­‰æ¯”è¾ƒåŸºæœ¬ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å–åã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸¤ä¸ªéƒ½æ˜¯éåŸå§‹ç±»å‹çš„å€¼çš„æ¯”è¾ƒï¼Œ`==` å’Œ `===` çš„è§„åˆ™éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬åªä¼šæ£€æŸ¥åœ°å€å¼•ç”¨æ˜¯å¦åŒ¹é…ï¼Œå’Œå®ƒä»¬æœ¬æ¥çš„å€¼æ— å…³ï¼š
```javascript
var a = [1,2,3];
var b = [1,2,3];
var c = '1,2,3';

a == c; // true
b == c; // true
a == b; // false
```

#### ä¸å…¨ç­‰(Inequality)
`<`ã€`>`ã€`<=`ã€`>=` æ˜¯æ‰€è°“çš„å…³ç³»æ¯”è¾ƒï¼Œæ¯”å¦‚å¸¸ç”¨çš„æ¯”è¾ƒ *æ•°å­—(number)* çš„å¤§å° â€”â€” `3 < 4`ã€‚

JSä¸­çš„ *å­—ç¬¦ä¸²(string)* ä¹Ÿèƒ½è¿›è¡Œå…³ç³»æ¯”è¾ƒ â€”â€” ç”¨å­—æ¯é¡ºåºçš„è§„åˆ™(aka alphabetic like a dictionary)æ¥è¿›è¡Œæ¯”è¾ƒã€‚

å¦‚æœæ—¢æœ‰ *æ•°å­—(number)* åˆæœ‰ *å­—ç¬¦ä¸²(string)*ï¼Œé‚£ä¼šå°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—åè¿›è¡Œæ¯”è¾ƒã€‚

```javascript
var a = 22;
var b = '23';
var c = 'txt';

a < b; // true
a > b; // false
a == b; // false

a < c; // false
a > c; // false
a == c; // false
```

ğŸ‘†ä¸Šé¢çš„ `var c = 'txt'` åœ¨è¿›è¡Œ *å…³ç³»æ¯”è¾ƒ* æ—¶ä¼šè¢«è½¬æ¢æˆæ•°å­—ï¼Œä½†å› ä¸ºå®ƒä¸æ˜¯ *ç±»æ•°å­—çš„å­—ç¬¦ä¸²(numeric)*ï¼Œå› æ­¤ä¼šè¢«è½¬æ¢æˆ `NaN` â€”â€” è¯¥å€¼ä¸å¤§äºã€å°äºæˆ–ç­‰äºä»»ä½•å€¼ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«ï¼š
```javascript
var a = NaN;

a == a; // false
```

---

## å˜é‡(Variables)
åœ¨JSä¸­ï¼Œå˜é‡çš„åå­—æœ‰æ˜ç¡®çš„è§„åˆ™ï¼š
- å¿…é¡»ä»¥ `a`-`z`ã€`A`-`Z`ã€`$`ã€`_`å¼€å¤´

- é™¤å»å¼€å¤´éƒ¨åˆ†ï¼Œæ•°å­—`0`-`9`ä¹Ÿèƒ½å¤Ÿè¢«ç”¨äºåˆ›å»ºå˜é‡å

- _ä¿ç•™å­—(reserved word)_ å’Œ _å…³é”®å­—(keywords, `var`ã€`for`ã€`in`ã€`if`ã€`null`ã€`undefined`ã€`true`ã€`false`...)_ ä¸èƒ½è¢«ç”¨äºåˆ›å»ºå˜é‡å

### å‡½æ•°ä½œç”¨åŸŸ(Function Scopes)
ç”¨ `var` å…³é”®å­—å£°æ˜çš„å˜é‡è¦ä¹ˆå±äºå…¨å±€ä½œç”¨åŸŸï¼Œè¦ä¹ˆå±äºæŸä¸ªå‡½æ•°ä½œç”¨åŸŸã€‚

#### æå‡(Hoisting)
åœ¨ä»»æ„ä¸€å±‚çš„ä½œç”¨åŸŸä¸­ï¼Œæ— è®º `var` å‡ºç°åœ¨å“ªé‡Œï¼Œè¿™ä¸ª *å£°æ˜(declaration)* éƒ½èƒ½åœ¨è¿™æ•´ä¸ªä½œç”¨åŸŸè¢«è®¿é—®åˆ°ï¼Œè¿™ä¸ªç‰¹å¾è¢«ç§°ä¸º *æå‡(hoisting)*ï¼š
```javascript
var a = 2;

foo();

function foo () {
  a = 3;

  console.log(a); // 3

  var a;
}

console.log(a); // 2
```

__Warning__ï¼šæˆ‘ä»¬å¸¸ç”¨çš„æå‡ä¸€èˆ¬ç”¨äºå‡½æ•°çš„æå‡ï¼Œå¦‚æœä»£ç çš„è¿è¡Œä¾èµ–äºå˜é‡çš„æå‡ï¼Œå¯èƒ½è®©åˆ«äººäº§ç”Ÿå›°æƒ‘ã€‚

#### åµŒå¥—ä½œç”¨åŸŸ(Nested Scoped)
å˜é‡åœ¨å®ƒçš„ä½œç”¨åŸŸæˆ–å…¶ä½œç”¨åŸŸ *åµŒå¥—çš„å­ä½œç”¨åŸŸ* éƒ½æ˜¯èƒ½è¢«è®¿é—®åˆ°çš„ï¼š
```javascript
function foo () {
  var a = 1;

  function bar () {
    var b = 2;

    function baz () {
      var c = 3;

      console.log(a, b, c); // 1 2 3
    }

    baz();
    console.log(a, b); // 1 2
  }

  bar();
  console.log(a); // 1
}

foo();
```

å¦‚æœä½ è¯•å›¾è®¾ç½®ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œä½†è¯¥å˜é‡åœ¨å¹¶æ²¡æœ‰è¢«å£°æ˜ï¼Œé‚£æœ€ç»ˆä½ ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºè¿™ä¸ªå˜é‡ï¼Œæˆ–è€…åœ¨ *ä¸¥æ ¼æ¨¡å¼(Strict Mode)* ä¸­æŠ¥é”™ï¼š
```javascript
function foo () {
  a = 5;
}

foo();
a; // 5
```

**ğŸ‘†è¿™æ˜¯JSçš„æ¯’ç˜¤ï¼Œå°½é‡é¿å…å†™å‡ºè¿™ç§ğŸ’©ä»£ç ï¼**

ES6çš„å…³é”®å­— `let` é…åˆ `{}`*å—(block)* èƒ½å¤Ÿå£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼š
```javascript
function foo () {
  var a = 1;

  if (a >= 1) {
    let b = 2;

    while(b < 5) {
      let c = b * 2;
      b++;

      console.log(a + c);
    }
  }
}

foo(); // 5 7 9
```

ç”¨ `let` å£°æ˜çš„å˜é‡ `b` å’Œ `c` éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œ`b` åªåœ¨ `if` è¯­å¥ä¸­è¢«è®¿é—®åˆ°ï¼Œè€Œ `c` åªèƒ½åœ¨ `while` å¾ªç¯ä¸­è®¿é—®åˆ°ã€‚

---

## æ¡ä»¶(Conditionals)